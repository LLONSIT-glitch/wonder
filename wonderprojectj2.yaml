name: Wonder Project J2 (Japanese)
sha1: 3a311ec0d77d4e0fc425a99cb6b9416f072e268e
options:
  basename: wonderprojectj2
  target_path: baserom.jp.z64
  elf_path: build/wonderprojectj2.elf
  base_path: .
  platform: n64
  compiler: IDO

  # asm_path: asm
  # src_path: src
  # build_path: build
  # create_asm_dependencies: True

  ld_script_path: wonderprojectj2.ld
  ld_dependencies: True

  find_file_boundaries: True
  header_encoding: ASCII

  o_as_suffix: True
  use_legacy_include_asm: False
  mips_abi_float_regs: o32

  asm_function_macro: glabel
  asm_jtbl_label_macro: jlabel
  asm_data_macro: dlabel

  # section_order: [".text", ".data", ".rodata", ".bss"]
  # auto_link_sections: [".data", ".rodata", ".bss"]

  symbol_addrs_path:
    - buggy_syms.txt
    - libultra_symbols.txt
    - symbol_addrs.txt
    - hardware_syms.txt
  reloc_addrs_path:
    - reloc_addrs.txt

  # undefined_funcs_auto_path: undefined_funcs_auto.txt
  # undefined_syms_auto_path: undefined_syms_auto.txt

  extensions_path: tools/splat_ext

  # string_encoding: ASCII
  # data_string_encoding: ASCII
  rodata_string_guesser_level: 2
  data_string_guesser_level: 2
  asset_path: bins
  # libultra_symbols: True
  # hardware_regs: True
  # gfx_ucode: # one of [f3d, f3db, f3dex, f3dexb, f3dex2]
segments:
  - name: header
    type: header
    start: 0x0

  - name: boot
    type: bin
    start: 0x40

  - name: entry
    type: code
    start: 0x1000
    vram: 0x80000400
    subsegments:
      - [0x1000, hasm]

  - name: main
    type: code
    start: 0x1050
    vram: 0x80000450
    follows_vram: entry
    bss_size: 0xE82F0 # Previous size: C0C7C0
    subsegments:
      - [0x1050, c, sys/sys_main]
      - [0x3B20, c, code/code_3B20]
      - [0x6480, c, code/code_6480]
      - [0x6EC0, c, code/code_6EC0]
      - [0x83A0, c, code/code_83A0]
      - [0xAB70, c, code/code_AB70]
      - [0xC3A0, c, code/code_C3A0]
      - [0xDCE0, c, code/temp_heap]
      - [0xE180, c, code/code_E180]
      - [0xE9E0, c, code/code_E9E0]
      - [0x15870, c, code/code_15870]
      - [0x16A50, c, code/code_16A50]
      - [0x17710, c, code/code_17710]
      - [0x17FD0, c, code/code_17FD0]
      - [0x18700, c, code/code_18700]
      - [0x1ABA0, c, code/code_1ABA0]
      
      - [0x1FF90, c, code/code_1FF90]
      - [0x20400, c, code/code_20400]
      - [0x21320, c, code/code_21320]

      - [0x221A0, c, code/code_221A0]
      - [0x22AD0, c, code/code_22AD0]
      - [0x22D50, c, code/code_22D50]
      - [0x2CE70, c, code/code_2CE70]
      - [0x2DFB0, c, code/code_2DFB0]
      - [0x32890, c, code/code_32890]
      - [0x34860, c, code/code_34860]
      - [0x449C0, c, code/code_449C0]
      - [0x49830, c, code/code_49830]
      - [0x49B80, c, code/code_49B80]
      - [0x5B5A0, c, code/code_5B5A0]
      - [0x5DD50, c, code/code_5DD50]
      - [0x61040, c, code/code_61040]
      - [0x63240, c, code/code_63240]
      - [0x78BF0, c, code/code_78BF0]
      - [0x7A510, c, code/code_7A510]
      - [0x816A0, c, code/code_816A0]
      - [0x82DA0, c, code/code_82DA0]
      - [0x8DA90, c, code/code_8DA90]
      - [0x8F1A0, c, code/code_8F1A0]
      - [0x97AE0, c, code/code_97AE0]
      - [0x98FB0, c, code/code_98FB0]
      - [0xAE400, c, code/code_AE400]
      - [0xAEAD0, c, code/code_AEAD0]
      - [0xAFC60, c, code/code_AFC60]
      - [0xB2650, c, code/code_B2650]
      - [0xB90F0, c, audio/audio_mgr]
      - [0xBA180, c, audio/audio_driver]
      - [0xBD190, c, sys/dma_copy]
      - [0xBD220, c, sys/sys_mem]
      - [0xBE2F0, c, main]
      - [0xBF970, c, code/spi]
      - [0xC11A0, c, sys/sys_C11A0]
      - [0xC21C0, c, code/code_C21C0]
      - [0xC3C70, c, code/code_C3C70]

      # Libultra start?
      - [0xC4C80, c, libultra/io/viswapbuf]
      - [0xC4CD0, c, libultra/os/gettime]
      - [0xC4D60, c, libultra/io/vigetcurrframebuf]
      - [0xC4DA0, hasm,  libultra/os/setintmask]
      - [0xC4E40, c, libultra/gu/random]
      - [0xC4E70, hasm, writebackdcacheall]
      - [0xC4EA0, hasm, sqrtf]
      - [0xC4EB0, c, libultra/os/createmesgqueue]
      - [0xC4EE0, c, libultra/io/vimgr]
      - [0xC5240, c, libultra/io/visetmode]
      - [0xC52B0, c, libultra/io/viblack]
      - [0xC5320, c, libultra/os/seteventmesg]
      - [0xC5390, c, libultra/io/visetevent]
      - [0xC5400, c, libultra/os/createthread]
      - [0xC5550, c, libultra/os/startthread]
      - [0xC56A0, c, libultra/os/sendmesg]
      - [0xC57F0, c, libultra/os/yieldthread]
      - [0xC5840, c, libultra/os/recvmesg]
      - [0xC5980, c, libultra/os/sptaskyielded]
      - [0xC5A00, c, libultra/io/vigetnextframebuf]
      - [0xC5A40, c, libultra/io/sptask]
      - [0xC5D00, c, libultra/io/dpsetnextbuf]
      - [0xC5DB0, c, libultra/io/sptaskyield]
      - [0xC5DD0, c, libultra/io/controller]
      - [0xC6190, c, libultra/io/contreaddata]
      - [0xC63F0, c, libultra/io/pfsallocatefile]
      - [0xC6BA0, c, libultra/io/contreset]
      - [0xC6D20, c, libultra/io/pfsisplug]
      - [0xC7090, c, libultra/io/pfsinit]
      - [0xC7250, c, libultra/io/pfsnumfiles]
      - [0xC73A0, c, libultra/io/pfsfilestate]
      - [0xC7690, c, libultra/io/pfsfreeblocks]
      - [0xC77E0, c, libultra/io/pfsdeletefile]
      - [0xC7DF0, c, libultra/io/pfsreadwritefile]
      - [0xC82F0, c, libultra/audio/heapinit]
      - [0xC8330, c, libultra/io/aisetfreq]
      - [0xC8490, c, libultra/audio/sl]
      - [0xC8550, c, libultra/audio/heapalloc]
      - [0xC85B0, c, libultra/io/aigetlen]
      - [0xC85C0, c, libultra/os/virtualtophysical]
      - [0xC8640, c, libultra/io/aisetnextbuf]
      - [0xC86F0, c, libultra/audio/synthesizer]
      - [0xC8DD0, c, libultra/io/pidma]
      - [0xC8EE0, c, libultra/audio/bnkf]
      - [0xC9130, asm, csplayer]
      - [0xCA360, c, libultra/audio/sndpsetsound]
      - [0xCA380, c, libultra/audio/sndpstop]
      - [0xCA3D0, c, libultra/audio/sndpgetstate]
      - [0xCA3F0, c, libultra/audio/sndpdeallocate]
      - [0xCA440, asm, sndplayer] # A really old or modified? version of sndplayer
      - [0xCAB50, c, libultra/audio/sndpallocate]
      - [0xCABF0, c, libultra/audio/sndpsetpitch]
      - [0xCAC50, c, libultra/audio/sndpsetfxmix]
      - [0xCACB0, c, libultra/audio/sndpsetpan]
      - [0xCAD10, c, libultra/audio/sndpsetvol]
      - [0xCAD70, c, libultra/audio/sndpplay]
      - [0xCADE0, c, libultra/audio/cseq]
      - [0xCB8A0, c, libultra/audio/seqpsetseq]
      - [0xCB8E0, c, libultra/audio/seqpsetbank]
      - [0xCB920, c, libultra/audio/seqpplay]
      - [0xCB950, c, libultra/audio/seqpsetvol]
      - [0xCB990, c, libultra/audio/seqpstop]
      - [0xCB9C0, c, libultra/audio/cents2ratio]
      - [0xCBA10, c, libultra/gu/sinf]
      - [0xCBBD0, hasm, invaldcache]
      - [0xCBC80, c, libultra/io/pigetstat]
      - [0xCBC90, c, libultra/io/pirawdma]
      - [0xCBD70, asm]
      - [0xCC1A0, asm]
      - [0xCC440, c, libultra/os/destroythread]
      - [0xCC540, c, libultra/os/stopthread]
      - [0xCC600, c, libultra/os/getthreadpri]
      - [0xCC620, asm]
      - [0xCC660, asm]
      - [0xCC7B0, asm]
      - [0xCC7C0, asm]
      - [0xCCC10, asm]
      - [0xCCF70, asm]
      - [0xCD870, asm]
      - [0xCD880, asm]
      - [0xCDB90, asm]
      - [0xCDC10, asm]
      - [0xCDC20, asm]
      - [0xCDC60, asm]
      - [0xCDCF0, asm]
      - [0xCDD20, asm]
      - [0xCDD50, c, libultra/libc/ll]
      - [0xCE010, asm]
      - [0xCE0F0, asm]
      - [0xCE1A0, asm]
      - [0xCEFC0, c, libultra/io/pfsearchfile]
      - [0xCF180, asm]
      - [0xCF530, c, libultra/io/pfschecker]
      - [0xCFF90, asm]
      - [0xD0340, asm]
      - [0xD0350, asm]
      - [0xD0410, c, libultra/io/ai]
      - [0xD0440, asm] # drvrNew
      - [0xD0BE0, asm]
      - [0xD0C80, asm]
      - [0xD1920, asm]
      - [0xD1C20, asm]
      - [0xD2880, asm]
      - [0xD2990, asm]
      - [0xD2BD0, asm]
      - [0xD4510, asm]
      - [0xD4920, asm]
      - [0xD4A70, asm]
      - [0xD4B00, asm]
      - [0xD4D30, asm]
      - [0xD4E20, asm]
      - [0xD4EB0, asm]
      - [0xD4F50, asm]
      - [0xD5020, asm]
      - [0xD5040, asm]
      - [0xD50F0, asm]
      - [0xD5170, asm]
      - [0xD51D0, c, libultra/io/pirawread]
      - [0xD5230, hasm, bzero]
      - [0xD52D0, asm]
      - [0xD5BA0, asm]
      - [0xD6100, asm]
      - [0xD6130, asm]
      - [0xD62D0, asm]
      - [0xD6F20, asm]
      - [0xD6FA0, asm]
      - [0xD76C0, asm]
      - [0xD7720, asm]
      - [0xD7770, textbin, rspboot]
      - [0xD7840, textbin, f3d]

      # Data starts!
      - [0xD7BB0, data]
      - [0xDAB00, .data, sys/sys_main]
      - [0xDAB80, data]
      - [0xDC200, .data, code/code_1FF90]
      - [0xDC210, data]
      - [0xDC3E0, .data, code/code_2CE70]
      - [0xDC470, data]
      - [0xE98F0, .data, audio/audio_driver]
      - [0xE9900, data]
      - [0xECAC0, .data, libultra/gu/random]
      - [0xECAD0, data]
      - [0xED7F0, .data, libultra/io/vimgr]
      - [0xED810, .data, libultra/io/controller]
      - [0xED820, .data, libultra/audio/sl]
      - [0xED830, .data, libultra/io/aisetnextbuf]
      - [0xED840, data]
      - [0xEDD40, .rodata, sys/sys_main]
      - [0xEDD60, rodata]
      - [0xEDD80, rodata]
      - [0xEDDE0, rodata]
      - [0xEDF40, rodata]
      - [0xEDF60, rodata]
      - [0xEE190, rodata]
      - [0xEE210, rodata]
      - [0xEE780, .rodata, code/code_1FF90]
      - [0xEE840, .rodata, code/code_20400]
      - [0xEE870, .rodata, code/code_21320]
      - [0xEEE30, rodata]
      - [0xEF320, .rodata, code/code_2CE70]
      - [0xEF3A0, rodata]
      - [0xEF490, rodata]
      - [0xEFA80, rodata]
      - [0xEFAF0, rodata]
      - [0xEFD90, rodata]
      - [0xEFE00, rodata]
      - [0xF0110, rodata]
      - [0xF0130, rodata]
      - [0xF01E0, rodata]
      - [0xF0210, rodata]
      - [0xF0390, .rodata, code/code_97AE0]
      - [0xF03B0, rodata]
      - [0xF04B0, rodata]
      - [0xF0500, rodata]
      - [0xF0520, rodata]
      - [0xF0540, rodata] # code_B2650
      - [0xF06E0, rodata]
      - [0xF0790, .rodata, audio/audio_driver]
      - [0xF09E0, .rodata, main]
      - [0xF0A60, rodata]
      - [0xF0AE0, rodata]
      - [0xF0B60, .rodata, libultra/audio/synthesizer]
      - [0xF0B70, rodata]
      - [0xF0DB0, rodata]
      - [0xF0DF0, .rodata, libultra/audio/cseq]
      - [0xF0E00, .rodata, libultra/audio/cents2ratio]
      - [0xF0E10, .rodata, libultra/gu/sinf]
      - [0xF0E60, rodata]
      - [0xF0F10, rodata]
      - [0xF11B0, rodata]
      - [0xF1210, rodata]
      - [0xF1220, rodata]
      - [0xF1A20, rodata]
      - [0xF2220, rodata]
      - { start: 0xF24E0, type: bss, vram: 0x800F18E0, name: bss1 }
      - { start: 0xF24E0, type: .bss, vram: 0x801AA4F0, name: code/temp_heap}
      - { start: 0xF24E0, type: bss,  vram: 0x801AA500, name: bss2 }
      - { start: 0xF24E0, type: .bss, vram: 0x801AE860, name: libultra/io/vimgr }
      - { start: 0xF24E0, type: .bss, vram: 0x801AFA80, name: libultra/os/seteventmesg  }
      - { start: 0xF24E0, type: .bss, vram: 0x801AFB00, name:  libultra/io/sptask  }
      - { start: 0xF24E0, type: .bss, vram: 0x801AFB40, name: libultra/io/controller   }
      - { start: 0xF24E0, type: .bss, vram: 0x801AFBD0, name: libultra/io/pfsisplug  }
      - { start: 0xF24E0, type: bss, vram: 0x801AFC10, name: bss3  }
      

  - name: framebuffer1
    type: code
    vram: 0x801DA800
    bss_size: 0x4b00
    subsegments:
    - { type: .bss, vram: 0x801DA800, name: framebuffer1 }
    
  - name: framebuffer2
    type: code
    vram: 0x80200000
    bss_size: 0x4b00  
    subsegments:
    - { type: .bss, vram: 0x80200000, name: framebuffer2 }

  - name: heapMemBlock
    type: code
    vram: 0x80225800
    bss_size: 0x2223EC
    subsegments:
    - { type: .bss, vram: 0x80225800, name: heap_mem_block }

  - type: bin
    start: 0xF24E0
    vram: 0x800F18E0
    follows_vram: main

    # Vram start: 0x80400000 
    # Vram end: 0x8044a2d0
  - name: SpriteSeg1
    start: 0xF27E0
    vram: 0x80400000
    #vramEnd: 0x8044a2d0
    type: code
    subsegments:
    - [0xF27E0, bin]
    - { start: 0xF57E0, vram: 0x80403000, type: databin, use_src_path: True, name: sprites/SpriteSeg1/Seg_F57E0 }
    - { start: 0xFC320, vram: 0x80409B40, type: databin, use_src_path: True, name: sprites/SpriteSeg1/Seg_FC320 }
    - { start: 0xFD180, vram: 0x8040A9A0, type: databin, use_src_path: True, name: sprites/SpriteSeg1/Seg_FD180 }
    - { start: 0x105220, vram: 0x80412A40, type: databin, use_src_path: True, name: sprites/SpriteSeg1/Seg_105220 }
    - { start: 0x133AC0, vram: 0x804412E0, type: databin, use_src_path: True, name: sprites/SpriteSeg1/Seg_133AC0 }
    - { start: 0x13D2E0, vram: 0x8044AB00, type: databin, use_src_path: True, name: sprites/SpriteSeg1/MainSprites } # Main sprites
    #- [0x47F9A0, bin] # Sprite Palettes
    - [0x48b7a0, bin]

  - name: SpriteSeg2
    type: code
    start: 0x492860
    vram: 0x807A0080
    subsegments:
    - [0x492860, bin]
    - { start: 0x494200, end: 0x6e3a40, vram: 0x807a1a20, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_494200 }
    
    #- { start: 0x49a3c0, vram: 0x807a7be0, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_49a3c0 }
    #- { start: 0x639b20, vram: 0x80947340, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_639b20 }
    #- { start: 0x63b930, vram: 0x80949150, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_63b930 }
    #- { start: 0x671cb0, vram: 0x8097f4d0, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_671cb0 }
    #- { start: 0x6741e0, vram: 0x80981a00, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_6741e0 }
    #- { start: 0x682800, vram: 0x80990020, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_682800 }
    #- { start: 0x682960, vram: 0x80990180, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_682960 }
    #- { start: 0x6862c0, vram: 0x80993ae0, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_6862c0 }
    #- { start: 0x6863e0, vram: 0x80993c00, type: databin, use_src_path: True, name: sprites/SpriteSeg2/Seg_6863e0 }

  - name: Seg_639B20
    type: bin
    start: 0x639B20
    vram: 0x80947340

  - name: Seg_69A970
    type: bin
    start: 0x69A970
    vram: 0x809A8190
           
  - name: Seg_6E3A40
    type: code 
    vram: 0x809F1260
    start: 0x6E3A40
    subsegments:
    - [0x6e3a40, bin]
    - [0x6f74c0, .data, spi_offset_table_6E3A40]  # SPI offsets
    - [0x6f7960, bin] # SPI data

  - name: audioSequences
    type: bin
    start: 0x730E80
  
  - name: audioTblStart
    type: bin
    start: 0x756140

  - type: bin
    start: 0x759610

  - name: audioBankStart
    type: bin
    start: 0x785F70

  - type: bin
    start: 0x78AB70
   
  - [0x800000]
